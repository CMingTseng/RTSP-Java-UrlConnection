/* * Copyright (c) NDS TECHNOLOGIES FRANCE All rights Reserved. * * All Rights Reserved. No part of this software and its documentation may * be used, copied, modified, distributed or transmitted, in any form or * by any means, without the prior written permission of CANAL+ Technologies. * *//* **  PROJET       : MHW+ **  PACKAGE      : event ** **  COMPOSANT    : SimpleEventQueue.java **  VERSION      : ** **  IDENTIFIER   : $Id: QueueThread.java,v 1.1.8.2 2008/11/01 11:56:11 beautadm Exp $ ** **  CREATION     : 23 Juillet 2004 (12:05) **  AUTEUR       : Julien MARICHEZ (jmariche) ** **  EVOLUTION    : **  $No-Log: $ ** **  REMARQUE     : ** */package com.net.rtsp.util;import java.util.EventListener;class QueueThread extends Thread {    private final EventQueue q;    private volatile boolean killed;    public QueueThread(EventQueue q) {        super("QueueThread " + q);        this.q = q;    }    public void kill() {        killed = true;        interrupt();    }    public void run() {        EventQueue q = this.q;	 QueueJob[] jobs;        while (!killed) {             jobs=null;//[PCR NDS#37463]            try {                synchronized (q) {                    while (q.isEmpty()) {                        q.wait();                    }                    jobs = q.dequeueAll();                }                QueueThread.dispatch(jobs);            } catch (InterruptedException ex) {                // ex.printStackTrace();            }        }    }    boolean killed() {        return killed;     }    private static void dispatch(QueueJob[] jobs) {        // in order for jobs        for (int i = 0; i < jobs.length; i++) {            QueueJob job = jobs[i];            EventListener[] list = job.getListeners();            Dispatcher dispatcher = job.getDispatcher();            try {                dispatcher.dispatch(list, job.event);            } catch (Exception ex) {}        }    }}